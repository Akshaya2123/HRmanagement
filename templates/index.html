{% extends "base.html" %}
{% block main %}
<div class="min-h-[100dvh] flex flex-col">
  <div class="flex items-center justify-between px-[5vw] h-[10dvh] bg-white">
    <div class="font-bold text-3xl text-sky-400">HR Management System</div>
    <div class="flex items-center justify-center text-lg gap-6">
      <a href="/" class="">Home</a>
      {% if employee.designation != "E" %}
      <a href="/employees" class="">Employees</a>
      {% endif %}
      <a href="/features" class="">Features</a>
      <a href="/contact" class="">Contact</a>
      <a href="/about" class="">About</a>
    </div>
    <div class="flex items-center text-lg font-medium gap-[2rem]">
      {% if user.username %}
      <div class="">Hello {{ user.username }} !</div>
      <a
        href="/users/logout"
        class="h-[6dvh] w-[7vw] flex justify-center items-center rounded-xl border-4 border-sky-400 transition-colors hover:text-white hover:bg-sky-400"
      >
        Logout
      </a>
      {% else %}
      <a
        href="/users/login"
        class="h-[6dvh] w-[7vw] flex justify-center items-center rounded-xl border-4 border-sky-400 transition-colors hover:text-white hover:bg-sky-400"
      >
        Login
      </a>
      <a
        href="/users/signup"
        class="h-[6dvh] w-[7vw] flex justify-center items-center rounded-xl border-4 border-sky-400 text-white bg-sky-400 hover:bg-white hover:text-black"
      >
        Sign up
      </a>
      {% endif %}
    </div>
  </div>
  <hr class="h-[.1rem] bg-black" />
  {% block content %}{% endblock content %}
  <hr class="h-[.1rem] bg-black" />
  {% include "footer.html" %}
</div>
<script>
    function showPopup() {
        const popup = document.getElementById("popup");
        popup.style.display = "flex";
        document.querySelector('#popup button').focus()
    }

    function closePopup() {
        const popup = document.getElementById("popup");
        popup.style.display = "none";
        document.querySelector('form #name').focus()
    }

    document.addEventListener("DOMContentLoaded", () => {
        const messagesExist = document.getElementById('popup').dataset.messagesExist === "true";
        if (messagesExist) {
            showPopup();
        }
    });


    const ctx = document.getElementById('performanceChart').getContext('2d');
    const performanceChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: {{ labels|safe }},
            datasets: [{
                label: 'Performance Rating',
                data: {{ ratings|safe }},
                backgroundColor: 'rgba(54, 162, 235, 0.6)', 
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1,
				barThickness: 70
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    display: true,
                    position: 'bottom'
                },
                tooltip: {
                    enabled: true
                }
            },
            scales: {
                x: {
                    title: {
                        display: true,
                        text: 'Review Periods',
                        font: {
                            size: 16
                        }
                    }
                },
                y: {
                    beginAtZero: true,
                    max: 5, 
                    title: {
                        display: true,
                        text: 'Rating (Out of 5)',
                        font: {
                            size: 16
                        }
                    }
                }
            }
        }
    });
</script>

{% endblock main %}
